---
layout: post
title: route命令使用实例详解
categories:
description: route命令使用实例详解
keywords:
---
在实际的网络应用中，我们可能会遇到这样的网络环境，上外网我们使用的无线网络，内网我们使用的是有限网卡。在设置完成后会出现外网和内网的访问非常不稳定。需要经常使用网络诊断来处理。或者使用“禁用/启用网络连接”的方法来处理。非常的麻烦。我们可以使用route的命令来处理此类的问题。一般使用route delete、route add、route print这三条命令基本可以解决大部分的问题。
工具/原料
route
方法/步骤
以管理员的身份运行CMD,打开CMD运行界面。首先分析路由情况，打印路由表。输入如下的命令：route print


在路由表中，前一列为网络的目标地址，即可以访问的网络段，如：0.0.0.0为所有网段。


第二列为该网段的子网掩码，能够让路由器确定目的网络的地址类。例如：192.168.1.0网段的子网掩码为：255.255.255.0


第三列是网关，网关（Gateway）就是一个网络连接到另一个网络的“关口”。也就是网络关卡。如本例中我们需要访问外网的无线路由地址为192.168.253.2，那它就是网关。


第四列接口，接口列就是告诉路由器分配给网卡的IP地址。即本机网卡上的IP地址。在本机的地址中也包含回送地址127.0.0.1


第五列是跃点数。跃点：即路由。一个路由为一个跃点。传输过程中需要经过多个网络，每个被经过的网络设备点（有能力路由的）叫做一个跃点。该值越小，可信度越高。


问题判断：如果在路由表出现两个0.0.0.0的网络目标，或者没有包含你需要的网络目标段，例如：192.168.1.0那网络访问肯定是不正常的。首先我们可以手动改写路由表。先删除不正常的目标网络。例：删除访问外网的路由：route delete 0.0.0.0


再删除局域网段的路由，命令格式：route delete 网络目的地址 [mask] [子网掩码]
route delete 192.168.1.0 mask 255.255.255.0


9
我们可以采用“route add 网络目的地址 mask 子网掩码 网关”添加静态永久路由来处理该问题。
外网访问永久静态路由：route add -p 0.0.0.0 mask 0.0.0.0 192.168.253.2
内网访问永久静态路由：route add -p 192.168.1.0 mask 255.255.255.0 192.168.1.1


10
查看路由表，多了两条永久静态路由。route print，如果不指定跃点数，默认为1


11
测试外网，内网的连接情况，ping ,网络正常。


END
