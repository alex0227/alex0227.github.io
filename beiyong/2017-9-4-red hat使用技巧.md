---
layout: post
title: redhat使用技巧
categories: redhat
description: redhat使用
keywords: 终端
---
### redhat linux 7 使用
1. 设置terminal启动快捷键  
步骤：
  1. 依次点击applications，systemtools，settings， keyboard，shortcut，custome shortcuts  
  2. 点击+，增加一个快捷键name：run a terminal
    command：/usr/bin/gnome-terminal(Terminal 程序的路径）
  3. 点击add，一开始是禁用（disabled）的
  4. 点击disabled出现下面情形
    在disabled处点击,在键盘上，按下你想启动该命令的快捷键，我选择Ctrl+T

  然后关闭该设置，接着，使用ctrl+T,果然出现了我想要的终端
2. 重设root密码

  1. 开机，当进入系统选择界面时候按e键
  2. 在Linux16那行末尾加上rd,break，按ctrl+x进入救援模式
  3. 输入
  ```
    mount -o remount,rw /sysroot
    chroot /sysroot
    echo "要设置的密码" | passwd --stdin root
    touch /.autorelabel
    exit
    reboot
  ```
  等待系统重启  
3. 配置yum仓库  
 1. vim /etc/yum.repo.d/rhce.repo
 2. 输入信息
 ```
 [rhce]
 name = rhce
 baseurl = file:////media/cdrom
 enabled = 1
 gpgcheck = 0
 ```
 Yum软件仓库的作用是为了进一步简化RPM管理软件难度以及自动分析所需软件包及其依赖关系的技术。您可以把Yum想象成是一个硕大的软件仓库，里面保存有几乎所有常用的工具，而只需要说出所需的软件包名称，系统就会自动的为您搞定一切。  
方法/步骤

    1. 首先要进入到"/etc/yum.repos.d/"目录中（因为该目录存放着yum仓库的配置文件）
    2. 使用vim编辑器创建一个名为rhel7.repo的新配置文件（文件名称可随意，但后缀必须为repo），逐项写入下面加粗的配置参数并保存退出（不写中文注释）。  

    ```
[rhel-media] yum仓库唯一标识符，避免与其他仓库冲突。    
name=linuxprobe yum仓库的名称描述，易于识别仓库用处。。    
baseurl=file:///media/cdrom 提供方式包括FTP（ftp://..）、HTTP（http://..）、本地（file:///..）  
enabled=1 设置此源是否可用，1为可用，0为禁用。  
gpgcheck=1 设置此源是否校验文件，1为校验，0为不校验。  
gpgkey=file:///media/cdrom/RPM-GPG-KEY-redhat-release 若为校验请指定公钥文件地址。  
```
    3. 按配置参数的路径把光盘挂载，并把光盘挂载信息写入到/etc/fstab文件中。
    4. 使用"yum install httpd -y"命令检查Yum仓库是否已经可用。
4. 防火墙
 1. 图形化工具firewall-config
    用图像化界面进行配置，记得选择permanent还是run-time
    配置完成点击options，reload firewalld
 2. firewall-cmd
 常用命令  
    1. 添加端口:   
 firewall-cmd --permanent --add-port=3260/tcp
    2. 设置端口转发：  
 firewall-cmd --permanent --add-forward-port=port=5423:proto=tcp:toport=80  
    3. 添加服务：  
 firewall-cmd --permanent --add-service=http  
    4. 添加富规则：  
        1. 端口控制：  
        firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="172.25.0.0/24" port protocol="tcp" port="3260" accept"  
        2. 服务控制：  
        firewall-cmd --permanent --add-rich-rule="rule family="ipv4" source address="172.25.0.0/24" service name="http" accept"  
      5. 防火墙重启生效
        firewall-cmd --reload
5. selinux   
  1. 查看selinux状态
  getenforce
  2. 临时设置
    关闭： getenforce=0
    打开： getenforce=1
    永久设置,编辑文件，命令如下:
    ```
    vim /etc/selinux/config
    ```
  3. sebool值
       1. getsebool -a  | grep httpd | grep user  
      setsebool -P httpd_read_user_content on
       2. semanage port -l | grep http  
  4. semanage  port -a -t http_port_t -p tcp 8998
6. 上下文  
chcon -R -t httpd_sys_content_t /var/www/webapp  (网页目录)  
或者：
查看网站目录上下文：  
ls -lz /var/www/html
Semanege fcontent -a -t httpd_sys_content_t /var/www/webapp/webapp.wsgi  
Restorecon -v webapp.wsgi  (立即生效)
7. 设置网卡  
  1. 半命令行：  
nmtui  
  2. 图形化工具：  
nm-connection-editor  
  3. 编辑网卡信息:  
vim /etc/sysconfig/network-scripts/ifcfg-eno9090090  
    ```
    TYPE=Ethernet
    BOOTPROTO=none
    name=eno9090090
    ONBOOT=yes
    IPADDR=192.168.10.10
    NETMASK=255.255.255.0  #或者PREFIX=24
    GATEWAY=192.168.10.1
    DNS1=192.168.10.1
    ```
    重启网络服务：  
    systemctl restart network
8. vim常用快捷键
  1. 命令模式
  默认进入命令模式，在输入模式按esc回到命令模式  
  dd 删除（剪切）光标所在行  
  5dd 5行  
  yy 复制    
  5yy 5行    
  n 显示搜索命令定位到下一个字符串    
  N 显示  上一个
  p 将之前删除（dd）或者复制（yy）的数据粘贴到光标处  
  ？字符串 从文中自下而上搜索  
  /字符串 从上而下   
  2. 末行模式
  命令模式输入：进入末行模式
  :w 保存  
  :q 退出  
  :q!强制退出  
  :wq保存退出  
  :wq!强制保存退出  
  :set nu显示行号  
  :set nonu 不显示行号   
  :命令 执行命令  
  :整数 跳到该行  
  3. 输入模式
  命令模式时输入以下切换输入模式
  a在光标后一位输入
  i在光标当前位置输入
  o在光标下一行输入
9. 创建环境变量
重启生效修改以下配置文件
```
vim /etc/bashrc  
```
创建命令：alias 别名='命令'  
```
alias qstat='ps w'
```
取消命令：unalias 别名='命令'
```
unalias  qstat='ps w'
```
10. 配置主机名  
/etc/hostname
通过编辑/etc/sysconfig/network文件中的HOSTNAME字段就可以修改主机名。  
查看主机名
```
[root@zijuan/]#hostname
zijuan                             
```
技巧：两个简单的命令临时临时设置主机名。   
(1)使用sysctl命令修改内核参数，格式：sysctl kernel.hostname=主机名，如下。  
```
[root@zijuan /]# sysctl kernel.hostname=newname                                   
kernel.hostname=newname
```
 #newname为新设置的主机名  
(2)使用hostname命令设置主机名。格式为：hostname 主机名，如下。   
```
[root@zijuan /]# hostname newname
```
该设置为临时生效。重新启动系统后，设置失效。

hostname命令的使用：

hostname    
    -s, --short           short host name   
    -a, --alias           alias names   
    -i, --ip-address      addresses for the host name   
    -f, --fqdn, --long    long host name (FQDN)   
    -d, --domain          DNS domain name   
    -y, --yp, --nis       NIS/YP domain name   
    -F, --file            read host name or NIS domain name from given file  


11. 安装内核的升级
从http://rhgls.domain1.example.com/updates 升级正确的内核
```
[root@station ~]# vim /etc/yum.repos.d/update.repo [update] name=update baseurl=http://rhgls.domain1.example.com/updates enabled=1 gpgcheck=0 [root@station ~]# yum clean all [root@station ~]# yum makecache  [root@station ~]# yum update kernel -y
```
12. 配置一个 cron 任务
用户 natasha 必须配置一个定时执行任务，每天在本地时间 14:23 时执行命令。
/bin/echo hiya
```
crontab -e -u natasha 23 14 * * * /bin/echo hiya
```
